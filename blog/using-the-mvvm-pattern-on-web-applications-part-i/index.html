<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.134.2"><meta name=viewport content="width=device-width,initial-scale=1"><title>Using the MVVM pattern on web applications – Part I &#183; Salman Quazi</title>
<meta name=description content><link type=text/css rel=stylesheet href=https://www.salmanq.com/css/print.css media=print><link type=text/css rel=stylesheet href=https://www.salmanq.com/css/poole.css><link type=text/css rel=stylesheet href=https://www.salmanq.com/css/syntax.css><link type=text/css rel=stylesheet href=https://www.salmanq.com/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png><style type=text/css>.sidebar-about h1{font-size:1.95rem;font-weight:400}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-K4WVH5P91F"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K4WVH5P91F")</script></head><body class=theme-base-08><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://www.salmanq.com/><h1>Salman Quazi</h1></a><p class=lead>Director of Engineering for Microsoft Azure OpenAI in Mountain View, CA.</p></div><nav><ul class=sidebar-nav><li><a href=https://www.salmanq.com/>Home</a></li><li><a href=/blog/>Blog</a></li><li><a href=https://github.com/splusq/>Github</a></li><li><a href=https://www.linkedin.com/in/salmanquazi/>LinkedIn</a></li><li><a href=https://www.twitter.com/splusq>Twitter</a></li></ul></nav><p>Opinions are my own.</p></div></aside><main class="content container"><div class=post><h1>Using the MVVM pattern on web applications – Part I</h1><time datetime=2013-02-28T09:01:15Z class=post-date>Thu, Feb 28, 2013</time><p>In this series I will be discussing how the MVVM pattern can be used for almost any type of web application. MVVM (a variant on the MVP pattern) - is a really powerful pattern that can be used in UI applications. Traditionally these UI applications has been WPF and Silverlight. In this article I will show you how you can use the same principles to build web applications. With MVVM you have the following three ideas:</p><ul><li><strong>M</strong>odel - Represents the shape of the data. This can be your entity framework model or any other object - that describes your entities in view.</li><li><strong>V</strong>iew - This is where you represent your UI elements. Textboxes, dropdowns, anything you see on the screen. This mostly has been XAML.</li><li><strong>V</strong>iew<strong>M</strong>odel - This is where you represent the UI specific logic.</li></ul><p>Now why would you ever want to do something like this? The reason is when you write a web application or other UI application today you tend to write a lot of the UI-related logic in the code behind of the UI itself. This couples that logic to that specific view or page. You can&rsquo;t reuse it. You also can&rsquo;t easily test that logic because your UI (or the view) and logic about it are coupled together. If you wanted to test it you would have to use tools like <a href=http://docs.seleniumhq.org/>Selenium</a> and automate your UI clicks. Not fun. With MVVM because these are all separate, you can reuse the logic from a ViewModel across multiple views. Your ViewModels are reusable, which means you can create a view for say a mobile app, another for a large screen monitor, two views, one ViewModel. And lastly, because the ViewModel is a separate object which has nothing to do with the view - you can easily test it like you would any normal class. But how can the ViewModel which is completely disconnected from the view talk to the view? It&rsquo;s almost like we need a mechanism to de-couple ourselves from the UI but have a mechanism to update the UI. <strong>Enter Binding.</strong> If you ever used WPF or Silverlight you know one of the powerful concepts in the framework is support for binding (this is different from asp.net data binding). The way data binding works is that every view both in WPF and Silverlight (any XAML view) has this notion of a DataContext. Data context is an object that you can assign anything into and it is responsible for providing the data necessary for the view to function. So for example, a DataContext could be something as simple as:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span> <span style=color:#75715e>// a simple example</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>this</span>.DataContext = <span style=color:#66d9ef>new</span> { FirstName = <span style=color:#e6db74>&#34;Salman&#34;</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// or you can load data from a DB</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>this</span>.DataContext = repository.GetCustomerById(<span style=color:#ae81ff>1</span>); 
</span></span></code></pre></div><p>Once you have the data, within the view you can bind properties from the data context object:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span> &lt;<span style=color:#f92672>TextBox</span> <span style=color:#a6e22e>Text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{Binding FirstName}&#34;</span> /&gt; 
</span></span></code></pre></div><p>What this is saying is bind the FirstName property of the underlying model against this view. So if your underlying model is set to the value &ldquo;Salman&rdquo; the textbox text will display the text Salman. Think for a second what you would have to do say in a traditional ASP.NET application. You have to create a Textbox, give it a name, and in the code behind, somewhere in page load, do something like TextBox.Text = FirstName - something like that. And this is just in one place, when the data changes due to a database load you have to update the textbox again. That&rsquo;s a lot of grunt work - and error prone! So what about displaying changes that happen in the underlying model? Say your FirstName in your underlying model changes from Salman - to Sal - how can we reflect that back to the UI? This happens through a really simple interface called <a href=http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx><code>INotifyPropertyChanged</code></a>. INotifyPropertyChanged has an event named PropertyChanged. The idea is anytime the underlying model changes you raise this event with the name of the property that changed. The underlying framework does the rest. And lastly, what about when a user types something into the UI - how does the underlying model update? For that all we need to do is update the Mode to TwoWay in the binding. That&rsquo;s it. Okay let&rsquo;s quickly summarize what we have:</p><ul><li>Data context - any object that provides the necessary data to the view</li><li>Data binding - the idea of binding properties from your data context object to the view</li><li>Bi-directionality - the ability for the UI to update the underlying model and vice-versa</li></ul><p>So the key takeaway here is that MVVM is great. It helps me write disconnected logic for my view. But how can we use a pattern like this in a web application? Because a key ingredient for MVVM to work is Binding - which does not exist in web - and rightfully so. WPF and Silverlight is able to support binding because both the View and the ViewModel are in-process and the framework can listen for events. But in a web application the view is a HTML page, which lives in the client side in a browser somewhere, and the so-called ViewModel is the code behind which lives in the server side somewhere. So this is where magic comes in. With the help of bunch of different toolsets, like <a href=http://knockoutjs.com/>Knockout</a>, <a href=http://www.asp.net/web-api>MVC</a>, and <a href=http://msdn.microsoft.com/en-us/library/system.net.websockets.websocket.aspx>WebSockets</a>, we will achieve similar results - and it&rsquo;s just awesome. Because you will feel like you are writing .NET code without any UI and suddenly you will have a UI application. Sounds like magic, doesn&rsquo;t it? But for that you will need to wait till Part II of this discussion.</p><ul><li>Using the MVVM pattern on web applications – Part I</li><li><a href=/blog/using-the-mvvm-pattern-on-web-applications-part-ii/>Using the MVVM pattern on web applications – Part II</a></li><li><a href=/blog/using-the-mvvm-pattern-on-web-applications-part-iii/>Using the MVVM pattern on web applications – Part III</a></li></ul></div><h2>Comments</h2><script src=https://utteranc.es/client.js repo=splusq/splusq.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></main></body></html>