<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>Verifying your site is running? | Salman Quazi</title>
<meta property="og:title" content="Verifying your site is running? | Salman Quazi"><meta name=twitter:title content="Verifying your site is running? | Salman Quazi"><meta itemprop=name content="Verifying your site is running? | Salman Quazi"><meta name=application-name content="Verifying your site is running? | Salman Quazi"><meta property="og:site_name" content="Salman Quazi"><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:locale" content="en-us"><meta name=language content="en-us"><link rel=alternate hreflang=en href=https://www.salmanq.com/blog/verifying-your-site-is-running/ title><meta name=generator content="Hugo 0.135.0"><meta property="og:url" content="https://www.salmanq.com/blog/verifying-your-site-is-running/"><meta property="og:site_name" content="Salman Quazi"><meta property="og:title" content="Verifying your site is running?"><meta property="og:description" content="This question often comes up-how do you make sure that your site is running? One solution is to run tools like WhatsUp Gold that monitors your IIS service status, SQL service status etc. As long as these services respond as saying they are running, WhatsUp gold is happy. But unfortunately, the fact that these services are running does not mean that your website is functioning to the public. For example if you have a page that depends on an external web service, and for some reason the external web service is down, then your page will not respond and will eventually time out. To the public your site is down. WhatsUp gold is not necessarily going to check for that. I say not necessarily because it is possible to have WhatsUp gold monitor HTTP status, but that creates a strong coupling between WhatsUp gold and generic application development."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2004-03-02T08:00:00+00:00"><meta property="article:modified_time" content="2004-03-02T08:00:00+00:00"><meta property="article:tag" content="Uncategorized"><meta name=twitter:card content="summary"><meta name=twitter:title content="Verifying your site is running?"><meta name=twitter:description content="This question often comes up-how do you make sure that your site is running? One solution is to run tools like WhatsUp Gold that monitors your IIS service status, SQL service status etc. As long as these services respond as saying they are running, WhatsUp gold is happy. But unfortunately, the fact that these services are running does not mean that your website is functioning to the public. For example if you have a page that depends on an external web service, and for some reason the external web service is down, then your page will not respond and will eventually time out. To the public your site is down. WhatsUp gold is not necessarily going to check for that. I say not necessarily because it is possible to have WhatsUp gold monitor HTTP status, but that creates a strong coupling between WhatsUp gold and generic application development."><link rel=canonical href=https://www.salmanq.com/blog/verifying-your-site-is-running/><link href=/style.min.e390ba7da26222f4dc42a349955d76dbbe44e5ce2535a43de5a70633a0a9ec3c.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=https://www.salmanq.com/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/icons/favicon.svg><script async src="https://www.googletagmanager.com/gtag/js?id=G-K4WVH5P91F"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K4WVH5P91F")}</script></head><body data-theme=dark class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=https://www.salmanq.com/ class=logo><svg width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title/><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
</a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/blog/>Blog</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>Verifying your site is running?</h1><div class=post-meta><time datetime=2004-03-02T08:00:00+00:00 itemprop=datePublished>Mar 2, 2004</time></div></header><div class=page-content><p>This question often comes up-how do you make sure that your site is running? One solution is to run tools like <a href=http://www.ipswitch.com/products/whatsup/index.asp>WhatsUp Gold</a> that monitors your IIS service status, SQL service status etc. As long as these services respond as saying they are running, WhatsUp gold is happy. But unfortunately, the fact that these services are running does not mean that your website is functioning to the public. For example if you have a page that depends on an external web service, and for some reason the external web service is down, then your page will not respond and will eventually time out. To the public your site is down. WhatsUp gold is not necessarily going to check for that. I say not necessarily because it is possible to have WhatsUp gold monitor HTTP status, but that creates a strong coupling between WhatsUp gold and generic application development.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl> <span class=n>error_reporting</span><span class=p>(</span><span class=n>E_ERROR</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>class</span> <span class=n>servers</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=nv>$settings</span> <span class=o>=</span> <span class=n>array</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>const</span> <span class=n>maxErrors</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		        
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>function</span> <span class=n>add</span><span class=p>(</span><span class=nv>$host</span><span class=p>,</span> <span class=nv>$port</span><span class=p>,</span> <span class=nv>$url</span><span class=p>,</span> <span class=nv>$maxLines</span><span class=p>,</span> <span class=nv>$search</span><span class=p>,</span> <span class=nv>$subject</span><span class=p>,</span> <span class=nv>$to</span><span class=p>,</span> <span class=nv>$cc</span><span class=p>,</span> <span class=nv>$bcc</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>array_push</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=n>settings</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>			<span class=n>array</span><span class=p>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;host&#34;</span>		<span class=o>=&gt;</span> <span class=nv>$host</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;port&#34;</span>		<span class=o>=&gt;</span> <span class=nv>$port</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;url&#34;</span> 		<span class=o>=&gt;</span> <span class=nv>$url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;search&#34;</span> 	<span class=o>=&gt;</span> <span class=nv>$search</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;maxLines&#34;</span>	<span class=o>=&gt;</span> <span class=nv>$maxLines</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;subject&#34;</span>	<span class=o>=&gt;</span> <span class=nv>$subject</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;to&#34;</span> 		<span class=o>=&gt;</span> <span class=nv>$to</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;cc&#34;</span> 		<span class=o>=&gt;</span> <span class=nv>$cc</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;bcc&#34;</span> 		<span class=o>=&gt;</span> <span class=nv>$bcc</span>
</span></span><span class=line><span class=cl>			<span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>lastState</span><span class=p>(</span><span class=nv>$server</span><span class=p>,</span> <span class=nv>$reset</span><span class=o>=</span><span class=n>false</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nv>$errorCount</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=nv>$filename</span> <span class=o>=</span> <span class=n>md5</span><span class=p>(</span><span class=nv>$server</span><span class=p>[</span><span class=s>&#34;host&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>	<span class=nv>$exists</span> <span class=o>=</span> <span class=n>file_exists</span><span class=p>(</span><span class=nv>$filename</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=nv>$reset</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=nv>$exists</span><span class=p>)</span> <span class=nv>$status</span> <span class=o>=</span> <span class=n>fopen</span><span class=p>(</span><span class=nv>$filename</span><span class=p>,</span><span class=s>&#34;rw+&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>else</span> <span class=nv>$status</span> <span class=o>=</span> <span class=n>fopen</span><span class=p>(</span><span class=nv>$filename</span><span class=p>,</span> <span class=s>&#34;x+&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=nv>$status</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>echo</span><span class=p>(</span><span class=s>&#34;Failed to open $filename (status file)\r\n&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>		<span class=nv>$errorCount</span> <span class=o>=</span> <span class=p>(</span><span class=n>fread</span><span class=p>(</span><span class=nv>$status</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span><span class=o>+</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=nv>$newCount</span> <span class=o>=</span> <span class=p>((</span><span class=nv>$errorCount</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span><span class=o>.</span><span class=s>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=n>rewind</span><span class=p>(</span><span class=nv>$status</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=n>fwrite</span><span class=p>(</span><span class=nv>$status</span><span class=p>,</span> <span class=nv>$newCount</span><span class=p>,</span> <span class=n>strlen</span><span class=p>(</span><span class=nv>$newCount</span><span class=p>));</span>
</span></span><span class=line><span class=cl>		<span class=n>fclose</span><span class=p>(</span><span class=nv>$status</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=nv>$exists</span><span class=p>)</span> <span class=nb>unlink</span><span class=p>(</span><span class=nv>$filename</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nv>$errorCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>error</span><span class=p>(</span><span class=nv>$msg</span><span class=p>,</span> <span class=nv>$server</span><span class=p>,</span> <span class=nv>$sendmail</span><span class=o>=</span><span class=n>true</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>echo</span> <span class=s>&#34;FAILED,\&#34;&#34;</span><span class=p>,</span> <span class=n>str_replace</span><span class=p>(</span><span class=s>&#34;\&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;&#39;&#34;</span><span class=p>,</span> <span class=nv>$msg</span><span class=p>),</span> <span class=s>&#34;\&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span><span class=p>(</span><span class=nv>$sendmail</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nv>$errorCount</span> <span class=o>=</span> <span class=n>lastState</span><span class=p>(</span><span class=nv>$server</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=nv>$errorCount</span> <span class=o>&lt;</span> <span class=nn>servers::</span><span class=n>maxErrors</span> <span class=o>&amp;&amp;</span> <span class=nv>$errorCount</span><span class=o>&gt;</span><span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nv>$headers</span> <span class=o>=</span> <span class=s>&#34;From: \&#34;System Administrators\&#34; &lt;systems@law.ucla.edu&gt;\r\nPriority: Urgent\r\nImportance: high&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span><span class=p>(</span><span class=nv>$server</span><span class=p>[</span><span class=s>&#34;cc&#34;</span><span class=p>]</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nv>$headers</span> <span class=o>.=</span> <span class=s>&#34;\r\nCC: {$server[&#34;</span><span class=n>cc</span><span class=s>&#34;]}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span><span class=p>(</span><span class=nv>$server</span><span class=p>[</span><span class=s>&#34;bcc&#34;</span><span class=p>]</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nv>$headers</span> <span class=o>.=</span> <span class=s>&#34;\r\nBCC: {$server[&#34;</span><span class=n>bcc</span><span class=s>&#34;]}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=n>mail</span><span class=p>(</span><span class=nv>$server</span><span class=p>[</span><span class=s>&#34;to&#34;</span><span class=p>],</span> <span class=nv>$server</span><span class=p>[</span><span class=s>&#34;subject&#34;</span><span class=p>],</span> <span class=nv>$msg</span><span class=p>,</span> <span class=nv>$headers</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>echo</span> <span class=s>&#34;,\&#34;(error count is $errorCount)\&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span> 
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl> <span class=k>require</span><span class=p>(</span><span class=s>&#34;functions.inc.php&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$verifyServers</span> <span class=o>=</span> <span class=k>new</span> <span class=n>servers</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nv>$verifyServers</span><span class=o>-&gt;</span><span class=n>add</span><span class=p>(</span><span class=s>&#34;www.law.ucla.edu&#34;</span><span class=p>,</span> 		<span class=mi>80</span><span class=p>,</span>	<span class=s>&#34;/home/Default.aspx&#34;</span><span class=p>,</span>	<span class=mi>40</span><span class=p>,</span>	<span class=s>&#34;UCLA School of Law&#34;</span><span class=p>,</span> 				<span class=s>&#34;UCLAW Down&#34;</span><span class=p>,</span>		<span class=s>&#34;systems@law.ucla.edu&#34;</span><span class=p>,</span> <span class=s>&#34;salman@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;myvirustech@vtext.com,8186481722@vtext.com,3105023584@vtext.com&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$verifyServers</span><span class=o>-&gt;</span><span class=n>add</span><span class=p>(</span><span class=s>&#34;eres.lawlib.ucla.edu&#34;</span><span class=p>,</span>		<span class=mi>80</span><span class=p>,</span>	<span class=s>&#34;/eres/Default.aspx&#34;</span><span class=p>,</span>	<span class=mi>80</span><span class=p>,</span>	<span class=s>&#34;Docutek ERes - Ereserves Home&#34;</span><span class=p>,</span>		<span class=s>&#34;ERes Down&#34;</span><span class=p>,</span>		<span class=s>&#34;systems@law.ucla.edu&#34;</span><span class=p>,</span> <span class=s>&#34;salman@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;myvirustech@vtext.com,3105023584@vtext.com&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=sr>//</span><span class=nv>$verifyServers</span><span class=o>-&gt;</span><span class=n>add</span><span class=p>(</span><span class=s>&#34;ssl://lawnet.ucla.edu&#34;</span><span class=p>,</span>		<span class=mi>443</span><span class=p>,</span>	<span class=s>&#34;/index.html&#34;</span><span class=p>,</span>		<span class=mi>120</span><span class=p>,</span>	<span class=s>&#34;UCLA School of Law Student Email System&#34;</span><span class=p>,</span>	<span class=s>&#34;IMail Down&#34;</span><span class=p>,</span>		<span class=s>&#34;systems@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;salman@law.ucla.edu&#34;</span><span class=p>,</span> 	<span class=s>&#34;myvirustech@vtext.com,3105023584@vtext.com&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$verifyServers</span><span class=o>-&gt;</span><span class=n>add</span><span class=p>(</span><span class=s>&#34;cyberpay.law.ucla.edu&#34;</span><span class=p>,</span>		<span class=mi>80</span><span class=p>,</span>	<span class=s>&#34;/Default.aspx&#34;</span><span class=p>,</span>	<span class=mi>40</span><span class=p>,</span>	<span class=s>&#34;CyberPay | UCLA Law&#34;</span><span class=p>,</span>				<span class=s>&#34;CyberPay Down&#34;</span><span class=p>,</span>	<span class=s>&#34;systems@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;salman@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;myvirustech@vtext.com,8186481722@vtext.com,3105023584@vtext.com&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$verifyServers</span><span class=o>-&gt;</span><span class=n>add</span><span class=p>(</span><span class=s>&#34;weblog.law.ucla.edu&#34;</span><span class=p>,</span>		<span class=mi>80</span><span class=p>,</span>	<span class=s>&#34;/index.html&#34;</span><span class=p>,</span>		<span class=mi>40</span><span class=p>,</span>	<span class=s>&#34;UCLA School of Law Blogs&#34;</span><span class=p>,</span>			<span class=s>&#34;Blog Down&#34;</span><span class=p>,</span>		<span class=s>&#34;systems@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;salman@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=sr>//</span><span class=nv>$verifyServers</span><span class=o>-&gt;</span><span class=n>add</span><span class=p>(</span><span class=s>&#34;ssl://webapp.law.ucla.edu&#34;</span><span class=p>,</span>	<span class=mi>443</span><span class=p>,</span>	<span class=s>&#34;/Default.asp&#34;</span><span class=p>,</span>		<span class=mi>40</span><span class=p>,</span>	<span class=s>&#34;UCLA School of Law - Online Application&#34;</span><span class=p>,</span>	<span class=s>&#34;J.D. Down&#34;</span><span class=p>,</span>		<span class=s>&#34;systems@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;salman@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$verifyServers</span><span class=o>-&gt;</span><span class=n>add</span><span class=p>(</span><span class=s>&#34;www.uclalawreview.org&#34;</span><span class=p>,</span>		<span class=mi>80</span><span class=p>,</span>	<span class=s>&#34;/index.aspx&#34;</span><span class=p>,</span>		<span class=mi>30</span><span class=p>,</span>	<span class=s>&#34;Current Issue | UCLA Law Review&#34;</span><span class=p>,</span>		<span class=s>&#34;Law Review Down&#34;</span><span class=p>,</span>	<span class=s>&#34;systems@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;salman@law.ucla.edu&#34;</span><span class=p>,</span>	<span class=s>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>foreach</span><span class=p>(</span><span class=nv>$verifyServers</span><span class=o>-&gt;</span><span class=n>settings</span> <span class=n>as</span> <span class=nv>$server</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>echo</span> <span class=n>date</span><span class=p>(</span><span class=s>&#34;Y-m-d H:i:s&#34;</span><span class=p>),</span> <span class=s>&#34;,&#34;</span><span class=p>,</span> <span class=nv>$server</span><span class=p>[</span><span class=s>&#34;host&#34;</span><span class=p>],</span> <span class=s>&#34;,&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=nv>$file</span><span class=o>=</span><span class=n>fsockopen</span><span class=p>(</span><span class=nv>$server</span><span class=p>[</span><span class=s>&#34;host&#34;</span><span class=p>],</span><span class=nv>$server</span><span class=p>[</span><span class=s>&#34;port&#34;</span><span class=p>],</span><span class=nv>$errno</span><span class=p>,</span><span class=nv>$errstr</span><span class=p>,</span><span class=mi>30</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=nv>$file</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span><span class=p>(</span><span class=n>strlen</span><span class=p>(</span><span class=nv>$errstr</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=nv>$errstr</span><span class=o>=</span><span class=s>&#34;Unexpected error&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=n>error</span><span class=p>(</span><span class=s>&#34;$errstr ($errno)&#34;</span><span class=p>,</span> <span class=nv>$server</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nv>$httpRequest</span> <span class=o>=</span> <span class=s>&#34;GET {$server[&#34;</span><span class=n>url</span><span class=s>&#34;]} HTTP/1.1\r\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=nv>$httpRequest</span> <span class=o>.=</span> <span class=s>&#34;Host: {$server[&#34;</span><span class=n>host</span><span class=s>&#34;]}\r\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=nv>$httpRequest</span> <span class=o>.=</span> <span class=s>&#34;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)\r\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=nv>$httpRequest</span> <span class=o>.=</span> <span class=s>&#34;Connection: Close\r\n\r\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>			<span class=n>fwrite</span><span class=p>(</span><span class=nv>$file</span><span class=p>,</span> <span class=nv>$httpRequest</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=nv>$found</span> <span class=o>=</span> <span class=n>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=nv>$lines</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=k>while</span><span class=p>(</span><span class=o>!</span><span class=n>feof</span><span class=p>(</span><span class=nv>$file</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span><span class=p>(</span><span class=o>++</span><span class=nv>$lines</span> <span class=o>&lt;</span> <span class=nv>$server</span><span class=p>[</span><span class=s>&#34;maxLines&#34;</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>strpos</span><span class=p>(</span><span class=n>fgets</span><span class=p>(</span><span class=nv>$file</span><span class=p>),</span> <span class=nv>$server</span><span class=p>[</span><span class=s>&#34;search&#34;</span><span class=p>])</span> <span class=o>!==</span> <span class=n>FALSE</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=nv>$found</span> <span class=o>=</span> <span class=n>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>					<span class=n>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span>
</span></span><span class=line><span class=cl>				<span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nv>$lines</span> <span class=o>&gt;</span> <span class=nv>$server</span><span class=p>[</span><span class=s>&#34;maxLines&#34;</span><span class=p>])</span> <span class=n>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=nv>$found</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=n>error</span><span class=p>(</span><span class=s>&#34;content error&#34;</span><span class=p>,</span> <span class=nv>$server</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=n>echo</span> <span class=s>&#34;OK&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>				<span class=n>lastState</span><span class=p>(</span><span class=nv>$server</span><span class=p>,</span> <span class=n>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=n>fclose</span><span class=p>(</span><span class=nv>$file</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=n>echo</span> <span class=s>&#34;\r\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=n>catch</span><span class=p>(</span><span class=n>Exception</span> <span class=nv>$ex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>error</span><span class=p>(</span><span class=nv>$ex</span><span class=o>-&gt;</span><span class=n>Message</span><span class=p>,</span> <span class=nv>$server</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span> 
</span></span></code></pre></div></div><h2>Comments</h2><script src=https://utteranc.es/client.js repo=splusq/splusq.github.io issue-term=title theme=github-dark crossorigin=anonymous async></script></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/splusq target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://www.twitter.com/splusq target=_blank rel="noopener noreferrer me" title=Twitter><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a><a href=https://www.linkedin.com/in/salmanquazi/ target=_blank rel="noopener noreferrer me" title=Linkedin><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2024 Salman Quazi.</small></footer><script src=https://www.salmanq.com/js/main.min.4ee188e1744c19816e95a540b2650ed9f033ea0371e74eac8e717355cfca8741.js integrity="sha256-TuGI4XRMGYFulaVAsmUO2fAz6gNx506sjnFzVc/Kh0E="></script></body></html>