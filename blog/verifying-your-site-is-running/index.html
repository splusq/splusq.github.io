<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Verifying your site is running? | Salman Quazi</title><meta name=keywords content="Uncategorized"><meta name=description content="This question often comes up-how do you make sure that your site is running? One solution is to run tools like WhatsUp Gold that monitors your IIS service status, SQL service status etc. As long as these services respond as saying they are running, WhatsUp gold is happy. But unfortunately, the fact that these services are running does not mean that your website is functioning to the public. For example if you have a page that depends on an external web service, and for some reason the external web service is down, then your page will not respond and will eventually time out."><meta name=author content><link rel=canonical href=https://www.salmanq.com/blog/verifying-your-site-is-running/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.salmanq.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.salmanq.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.salmanq.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.salmanq.com/apple-touch-icon.png><link rel=mask-icon href=https://www.salmanq.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-38742121-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Verifying your site is running?"><meta property="og:description" content="This question often comes up-how do you make sure that your site is running? One solution is to run tools like WhatsUp Gold that monitors your IIS service status, SQL service status etc. As long as these services respond as saying they are running, WhatsUp gold is happy. But unfortunately, the fact that these services are running does not mean that your website is functioning to the public. For example if you have a page that depends on an external web service, and for some reason the external web service is down, then your page will not respond and will eventually time out."><meta property="og:type" content="article"><meta property="og:url" content="https://www.salmanq.com/blog/verifying-your-site-is-running/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2004-03-02T08:00:00+00:00"><meta property="article:modified_time" content="2004-03-02T08:00:00+00:00"><meta property="og:site_name" content="Salman Quazi"><meta name=twitter:card content="summary"><meta name=twitter:title content="Verifying your site is running?"><meta name=twitter:description content="This question often comes up-how do you make sure that your site is running? One solution is to run tools like WhatsUp Gold that monitors your IIS service status, SQL service status etc. As long as these services respond as saying they are running, WhatsUp gold is happy. But unfortunately, the fact that these services are running does not mean that your website is functioning to the public. For example if you have a page that depends on an external web service, and for some reason the external web service is down, then your page will not respond and will eventually time out."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://www.salmanq.com/blog/"},{"@type":"ListItem","position":2,"name":"Verifying your site is running?","item":"https://www.salmanq.com/blog/verifying-your-site-is-running/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Verifying your site is running?","name":"Verifying your site is running?","description":"This question often comes up-how do you make sure that your site is running? One solution is to run tools like WhatsUp Gold that monitors your IIS service status, SQL service status etc. As long as these services respond as saying they are running, WhatsUp gold is happy. But unfortunately, the fact that these services are running does not mean that your website is functioning to the public. For example if you have a page that depends on an external web service, and for some reason the external web service is down, then your page will not respond and will eventually time out.","keywords":["Uncategorized"],"articleBody":"This question often comes up-how do you make sure that your site is running? One solution is to run tools like WhatsUp Gold that monitors your IIS service status, SQL service status etc. As long as these services respond as saying they are running, WhatsUp gold is happy. But unfortunately, the fact that these services are running does not mean that your website is functioning to the public. For example if you have a page that depends on an external web service, and for some reason the external web service is down, then your page will not respond and will eventually time out. To the public your site is down. WhatsUp gold is not necessarily going to check for that. I say not necessarily because it is possible to have WhatsUp gold monitor HTTP status, but that creates a strong coupling between WhatsUp gold and generic application development.\nerror_reporting(E_ERROR); class servers { public $settings = array(); const maxErrors = 5; public function add($host, $port, $url, $maxLines, $search, $subject, $to, $cc, $bcc) { array_push($this-\u003esettings, array( \"host\"\t=\u003e $host, \"port\"\t=\u003e $port, \"url\" =\u003e $url, \"search\" =\u003e $search, \"maxLines\"\t=\u003e $maxLines, \"subject\"\t=\u003e $subject, \"to\" =\u003e $to, \"cc\" =\u003e $cc, \"bcc\" =\u003e $bcc ) ); } } function lastState($server, $reset=false) { $errorCount = 0; $filename = md5($server[\"host\"]); $exists = file_exists($filename); if(!$reset) { if($exists) $status = fopen($filename,\"rw+\"); else $status = fopen($filename, \"x+\"); if(!$status) { echo(\"Failed to open $filename (status file)\\r\\n\"); } $errorCount = (fread($status, 1)+0); $newCount = (($errorCount+1).\"\"); rewind($status); fwrite($status, $newCount, strlen($newCount)); fclose($status); } else { if($exists) unlink($filename); } return $errorCount; } function error($msg, $server, $sendmail=true) { echo \"FAILED,\\\"\", str_replace(\"\\\"\", \"'\", $msg), \"\\\"\"; if($sendmail) { $errorCount = lastState($server); if($errorCount \u003c servers::maxErrors \u0026\u0026 $errorCount\u003e0) { $headers = \"From: \\\"System Administrators\\\" \\r\\nPriority: Urgent\\r\\nImportance: high\"; if($server[\"cc\"] != \"\") { $headers .= \"\\r\\nCC: {$server[\"cc\"]}\"; } if($server[\"bcc\"] != \"\") { $headers .= \"\\r\\nBCC: {$server[\"bcc\"]}\"; } mail($server[\"to\"], $server[\"subject\"], $msg, $headers); } else { echo \",\\\"(error count is $errorCount)\\\"\"; } } } require(\"functions.inc.php\"); $verifyServers = new servers(); $verifyServers-\u003eadd(\"www.law.ucla.edu\", 80,\t\"/home/Default.aspx\",\t40,\t\"UCLA School of Law\", \"UCLAW Down\",\t\"systems@law.ucla.edu\", \"salman@law.ucla.edu\",\t\"myvirustech@vtext.com,8186481722@vtext.com,3105023584@vtext.com\"); $verifyServers-\u003eadd(\"eres.lawlib.ucla.edu\",\t80,\t\"/eres/Default.aspx\",\t80,\t\"Docutek ERes - Ereserves Home\",\t\"ERes Down\",\t\"systems@law.ucla.edu\", \"salman@law.ucla.edu\",\t\"myvirustech@vtext.com,3105023584@vtext.com\"); //$verifyServers-\u003eadd(\"ssl://lawnet.ucla.edu\",\t443,\t\"/index.html\",\t120,\t\"UCLA School of Law Student Email System\",\t\"IMail Down\",\t\"systems@law.ucla.edu\",\t\"salman@law.ucla.edu\", \"myvirustech@vtext.com,3105023584@vtext.com\"); $verifyServers-\u003eadd(\"cyberpay.law.ucla.edu\",\t80,\t\"/Default.aspx\",\t40,\t\"CyberPay | UCLA Law\",\t\"CyberPay Down\",\t\"systems@law.ucla.edu\",\t\"salman@law.ucla.edu\",\t\"myvirustech@vtext.com,8186481722@vtext.com,3105023584@vtext.com\"); $verifyServers-\u003eadd(\"weblog.law.ucla.edu\",\t80,\t\"/index.html\",\t40,\t\"UCLA School of Law Blogs\",\t\"Blog Down\",\t\"systems@law.ucla.edu\",\t\"salman@law.ucla.edu\",\t\"\"); //$verifyServers-\u003eadd(\"ssl://webapp.law.ucla.edu\",\t443,\t\"/Default.asp\",\t40,\t\"UCLA School of Law - Online Application\",\t\"J.D. Down\",\t\"systems@law.ucla.edu\",\t\"salman@law.ucla.edu\",\t\"\"); $verifyServers-\u003eadd(\"www.uclalawreview.org\",\t80,\t\"/index.aspx\",\t30,\t\"Current Issue | UCLA Law Review\",\t\"Law Review Down\",\t\"systems@law.ucla.edu\",\t\"salman@law.ucla.edu\",\t\"\"); foreach($verifyServers-\u003esettings as $server) { try { echo date(\"Y-m-d H:i:s\"), \",\", $server[\"host\"], \",\"; $file=fsockopen($server[\"host\"],$server[\"port\"],$errno,$errstr,30); if(!$file) { if(strlen($errstr) == 0) $errstr=\"Unexpected error\"; error(\"$errstr ($errno)\", $server); } else { $httpRequest = \"GET {$server[\"url\"]} HTTP/1.1\\r\\n\"; $httpRequest .= \"Host: {$server[\"host\"]}\\r\\n\"; $httpRequest .= \"User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)\\r\\n\"; $httpRequest .= \"Connection: Close\\r\\n\\r\\n\"; fwrite($file, $httpRequest); $found = false; $lines = 0; while(!feof($file)) { if(++$lines \u003c $server[\"maxLines\"] \u0026\u0026 strpos(fgets($file), $server[\"search\"]) !== FALSE) { $found = true; break; } else if($lines \u003e $server[\"maxLines\"]) break; } if(!$found) { error(\"content error\", $server); } else { echo \"OK\"; lastState($server, true); } } fclose($file); echo \"\\r\\n\"; } catch(Exception $ex) { error($ex-\u003eMessage, $server); } } ","wordCount":"539","inLanguage":"en","datePublished":"2004-03-02T08:00:00Z","dateModified":"2004-03-02T08:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.salmanq.com/blog/verifying-your-site-is-running/"},"publisher":{"@type":"Organization","name":"Salman Quazi","logo":{"@type":"ImageObject","url":"https://www.salmanq.com/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.salmanq.com/ accesskey=h title="Salman Quazi (Alt + H)">Salman Quazi</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.salmanq.com/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://github.com/splusq/ title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.linkedin.com/in/salmanquazi/ title=LinkedIn><span>LinkedIn</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.twitter.com/splusq title=Twitter><span>Twitter</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Verifying your site is running?</h1><div class=post-meta><span title='2004-03-02 08:00:00 +0000 UTC'>March 2, 2004</span>&nbsp;·&nbsp;3 min</div></header><div class=post-content><p>This question often comes up-how do you make sure that your site is running? One solution is to run tools like <a href=http://www.ipswitch.com/products/whatsup/index.asp>WhatsUp Gold</a> that monitors your IIS service status, SQL service status etc. As long as these services respond as saying they are running, WhatsUp gold is happy. But unfortunately, the fact that these services are running does not mean that your website is functioning to the public. For example if you have a page that depends on an external web service, and for some reason the external web service is down, then your page will not respond and will eventually time out. To the public your site is down. WhatsUp gold is not necessarily going to check for that. I say not necessarily because it is possible to have WhatsUp gold monitor HTTP status, but that creates a strong coupling between WhatsUp gold and generic application development.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-perl data-lang=perl><span style=display:flex><span> error_reporting(E_ERROR);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class servers {
</span></span><span style=display:flex><span>	public $settings <span style=color:#f92672>=</span> array();
</span></span><span style=display:flex><span>	const maxErrors <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>		        
</span></span><span style=display:flex><span>	public function add($host, $port, $url, $maxLines, $search, $subject, $to, $cc, $bcc) {
</span></span><span style=display:flex><span>		array_push($this<span style=color:#f92672>-&gt;</span>settings, 
</span></span><span style=display:flex><span>			array(
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;host&#34;</span>		<span style=color:#f92672>=&gt;</span> $host,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;port&#34;</span>		<span style=color:#f92672>=&gt;</span> $port,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;url&#34;</span> 		<span style=color:#f92672>=&gt;</span> $url,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;search&#34;</span> 	<span style=color:#f92672>=&gt;</span> $search,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;maxLines&#34;</span>	<span style=color:#f92672>=&gt;</span> $maxLines,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;subject&#34;</span>	<span style=color:#f92672>=&gt;</span> $subject,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;to&#34;</span> 		<span style=color:#f92672>=&gt;</span> $to,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;cc&#34;</span> 		<span style=color:#f92672>=&gt;</span> $cc,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;bcc&#34;</span> 		<span style=color:#f92672>=&gt;</span> $bcc
</span></span><span style=display:flex><span>			)
</span></span><span style=display:flex><span>		);
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>function lastState($server, $reset<span style=color:#f92672>=</span>false) {
</span></span><span style=display:flex><span>	$errorCount <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>	$filename <span style=color:#f92672>=</span> md5($server[<span style=color:#e6db74>&#34;host&#34;</span>]);
</span></span><span style=display:flex><span>	$exists <span style=color:#f92672>=</span> file_exists($filename);
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>$reset) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span>($exists) $status <span style=color:#f92672>=</span> fopen($filename,<span style=color:#e6db74>&#34;rw+&#34;</span>);
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span> $status <span style=color:#f92672>=</span> fopen($filename, <span style=color:#e6db74>&#34;x+&#34;</span>);
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>$status) {
</span></span><span style=display:flex><span>			echo(<span style=color:#e6db74>&#34;Failed to open $filename (status file)\r\n&#34;</span>);
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>		$errorCount <span style=color:#f92672>=</span> (fread($status, <span style=color:#ae81ff>1</span>)<span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>		$newCount <span style=color:#f92672>=</span> (($errorCount<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>)<span style=color:#f92672>.</span><span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>		rewind($status);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		fwrite($status, $newCount, strlen($newCount));
</span></span><span style=display:flex><span>		fclose($status);
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span>($exists) unlink($filename);
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> $errorCount;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>function error($msg, $server, $sendmail<span style=color:#f92672>=</span>true) {
</span></span><span style=display:flex><span>	echo <span style=color:#e6db74>&#34;FAILED,\&#34;&#34;</span>, str_replace(<span style=color:#e6db74>&#34;\&#34;&#34;</span>, <span style=color:#e6db74>&#34;&#39;&#34;</span>, $msg), <span style=color:#e6db74>&#34;\&#34;&#34;</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span>($sendmail) {
</span></span><span style=display:flex><span>		$errorCount <span style=color:#f92672>=</span> lastState($server);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span>($errorCount <span style=color:#f92672>&lt;</span> servers::maxErrors <span style=color:#f92672>&amp;&amp;</span> $errorCount<span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>			$headers <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;From: \&#34;System Administrators\&#34; &lt;systems@law.ucla.edu&gt;\r\nPriority: Urgent\r\nImportance: high&#34;</span>;
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span>($server[<span style=color:#e6db74>&#34;cc&#34;</span>] <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;&#34;</span>) {
</span></span><span style=display:flex><span>				$headers <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#34;\r\nCC: {$server[&#34;</span>cc<span style=color:#e6db74>&#34;]}&#34;</span>;
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span>($server[<span style=color:#e6db74>&#34;bcc&#34;</span>] <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;&#34;</span>) {
</span></span><span style=display:flex><span>				$headers <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#34;\r\nBCC: {$server[&#34;</span>bcc<span style=color:#e6db74>&#34;]}&#34;</span>;
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>			mail($server[<span style=color:#e6db74>&#34;to&#34;</span>], $server[<span style=color:#e6db74>&#34;subject&#34;</span>], $msg, $headers);
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>			echo <span style=color:#e6db74>&#34;,\&#34;(error count is $errorCount)\&#34;&#34;</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>} 
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-perl data-lang=perl><span style=display:flex><span> <span style=color:#66d9ef>require</span>(<span style=color:#e6db74>&#34;functions.inc.php&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$verifyServers <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> servers();
</span></span><span style=display:flex><span>$verifyServers<span style=color:#f92672>-&gt;</span>add(<span style=color:#e6db74>&#34;www.law.ucla.edu&#34;</span>, 		<span style=color:#ae81ff>80</span>,	<span style=color:#e6db74>&#34;/home/Default.aspx&#34;</span>,	<span style=color:#ae81ff>40</span>,	<span style=color:#e6db74>&#34;UCLA School of Law&#34;</span>, 				<span style=color:#e6db74>&#34;UCLAW Down&#34;</span>,		<span style=color:#e6db74>&#34;systems@law.ucla.edu&#34;</span>, <span style=color:#e6db74>&#34;salman@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;myvirustech@vtext.com,8186481722@vtext.com,3105023584@vtext.com&#34;</span>);
</span></span><span style=display:flex><span>$verifyServers<span style=color:#f92672>-&gt;</span>add(<span style=color:#e6db74>&#34;eres.lawlib.ucla.edu&#34;</span>,		<span style=color:#ae81ff>80</span>,	<span style=color:#e6db74>&#34;/eres/Default.aspx&#34;</span>,	<span style=color:#ae81ff>80</span>,	<span style=color:#e6db74>&#34;Docutek ERes - Ereserves Home&#34;</span>,		<span style=color:#e6db74>&#34;ERes Down&#34;</span>,		<span style=color:#e6db74>&#34;systems@law.ucla.edu&#34;</span>, <span style=color:#e6db74>&#34;salman@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;myvirustech@vtext.com,3105023584@vtext.com&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#e6db74>//</span>$verifyServers<span style=color:#f92672>-&gt;</span>add(<span style=color:#e6db74>&#34;ssl://lawnet.ucla.edu&#34;</span>,		<span style=color:#ae81ff>443</span>,	<span style=color:#e6db74>&#34;/index.html&#34;</span>,		<span style=color:#ae81ff>120</span>,	<span style=color:#e6db74>&#34;UCLA School of Law Student Email System&#34;</span>,	<span style=color:#e6db74>&#34;IMail Down&#34;</span>,		<span style=color:#e6db74>&#34;systems@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;salman@law.ucla.edu&#34;</span>, 	<span style=color:#e6db74>&#34;myvirustech@vtext.com,3105023584@vtext.com&#34;</span>);
</span></span><span style=display:flex><span>$verifyServers<span style=color:#f92672>-&gt;</span>add(<span style=color:#e6db74>&#34;cyberpay.law.ucla.edu&#34;</span>,		<span style=color:#ae81ff>80</span>,	<span style=color:#e6db74>&#34;/Default.aspx&#34;</span>,	<span style=color:#ae81ff>40</span>,	<span style=color:#e6db74>&#34;CyberPay | UCLA Law&#34;</span>,				<span style=color:#e6db74>&#34;CyberPay Down&#34;</span>,	<span style=color:#e6db74>&#34;systems@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;salman@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;myvirustech@vtext.com,8186481722@vtext.com,3105023584@vtext.com&#34;</span>);
</span></span><span style=display:flex><span>$verifyServers<span style=color:#f92672>-&gt;</span>add(<span style=color:#e6db74>&#34;weblog.law.ucla.edu&#34;</span>,		<span style=color:#ae81ff>80</span>,	<span style=color:#e6db74>&#34;/index.html&#34;</span>,		<span style=color:#ae81ff>40</span>,	<span style=color:#e6db74>&#34;UCLA School of Law Blogs&#34;</span>,			<span style=color:#e6db74>&#34;Blog Down&#34;</span>,		<span style=color:#e6db74>&#34;systems@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;salman@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#e6db74>//</span>$verifyServers<span style=color:#f92672>-&gt;</span>add(<span style=color:#e6db74>&#34;ssl://webapp.law.ucla.edu&#34;</span>,	<span style=color:#ae81ff>443</span>,	<span style=color:#e6db74>&#34;/Default.asp&#34;</span>,		<span style=color:#ae81ff>40</span>,	<span style=color:#e6db74>&#34;UCLA School of Law - Online Application&#34;</span>,	<span style=color:#e6db74>&#34;J.D. Down&#34;</span>,		<span style=color:#e6db74>&#34;systems@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;salman@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>$verifyServers<span style=color:#f92672>-&gt;</span>add(<span style=color:#e6db74>&#34;www.uclalawreview.org&#34;</span>,		<span style=color:#ae81ff>80</span>,	<span style=color:#e6db74>&#34;/index.aspx&#34;</span>,		<span style=color:#ae81ff>30</span>,	<span style=color:#e6db74>&#34;Current Issue | UCLA Law Review&#34;</span>,		<span style=color:#e6db74>&#34;Law Review Down&#34;</span>,	<span style=color:#e6db74>&#34;systems@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;salman@law.ucla.edu&#34;</span>,	<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreach</span>($verifyServers<span style=color:#f92672>-&gt;</span>settings as $server) {
</span></span><span style=display:flex><span>	try {
</span></span><span style=display:flex><span>		echo date(<span style=color:#e6db74>&#34;Y-m-d H:i:s&#34;</span>), <span style=color:#e6db74>&#34;,&#34;</span>, $server[<span style=color:#e6db74>&#34;host&#34;</span>], <span style=color:#e6db74>&#34;,&#34;</span>;
</span></span><span style=display:flex><span>		$file<span style=color:#f92672>=</span>fsockopen($server[<span style=color:#e6db74>&#34;host&#34;</span>],$server[<span style=color:#e6db74>&#34;port&#34;</span>],$errno,$errstr,<span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>$file) {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span>(strlen($errstr) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) $errstr<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Unexpected error&#34;</span>;
</span></span><span style=display:flex><span>			error(<span style=color:#e6db74>&#34;$errstr ($errno)&#34;</span>, $server);
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>			$httpRequest <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;GET {$server[&#34;</span>url<span style=color:#e6db74>&#34;]} HTTP/1.1\r\n&#34;</span>;
</span></span><span style=display:flex><span>			$httpRequest <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#34;Host: {$server[&#34;</span>host<span style=color:#e6db74>&#34;]}\r\n&#34;</span>;
</span></span><span style=display:flex><span>			$httpRequest <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#34;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)\r\n&#34;</span>;
</span></span><span style=display:flex><span>			$httpRequest <span style=color:#f92672>.=</span> <span style=color:#e6db74>&#34;Connection: Close\r\n\r\n&#34;</span>;
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>			fwrite($file, $httpRequest);
</span></span><span style=display:flex><span>			$found <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>			$lines <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>while</span>(<span style=color:#f92672>!</span>feof($file)) {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>if</span>(<span style=color:#f92672>++</span>$lines <span style=color:#f92672>&lt;</span> $server[<span style=color:#e6db74>&#34;maxLines&#34;</span>] <span style=color:#f92672>&amp;&amp;</span> strpos(fgets($file), $server[<span style=color:#e6db74>&#34;search&#34;</span>]) <span style=color:#f92672>!==</span> FALSE) {
</span></span><span style=display:flex><span>					$found <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>					break;
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>($lines <span style=color:#f92672>&gt;</span> $server[<span style=color:#e6db74>&#34;maxLines&#34;</span>]) break;
</span></span><span style=display:flex><span>				
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>$found) {
</span></span><span style=display:flex><span>				error(<span style=color:#e6db74>&#34;content error&#34;</span>, $server);
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>				echo <span style=color:#e6db74>&#34;OK&#34;</span>;
</span></span><span style=display:flex><span>				lastState($server, true);
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		fclose($file);
</span></span><span style=display:flex><span>		echo <span style=color:#e6db74>&#34;\r\n&#34;</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	catch(Exception $ex) {
</span></span><span style=display:flex><span>		error($ex<span style=color:#f92672>-&gt;</span>Message, $server);
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>} 
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.salmanq.com/tags/uncategorized/>Uncategorized</a></li></ul><nav class=paginav><a class=prev href=https://www.salmanq.com/blog/prolog/><span class=title>« Prev</span><br><span>PROLOG</span></a></nav></footer><script src=https://utteranc.es/client.js repo=splusq/splusq.github.io issue-term=title theme=github-dark crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://www.salmanq.com/>Salman Quazi</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>