<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.134.2"><meta name=viewport content="width=device-width,initial-scale=1"><title>Volume Backup &#183; Salman Quazi</title>
<meta name=description content><link type=text/css rel=stylesheet href=https://www.salmanq.com/css/print.css media=print><link type=text/css rel=stylesheet href=https://www.salmanq.com/css/poole.css><link type=text/css rel=stylesheet href=https://www.salmanq.com/css/syntax.css><link type=text/css rel=stylesheet href=https://www.salmanq.com/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png><style type=text/css>.sidebar-about h1{font-size:1.95rem;font-weight:400}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-K4WVH5P91F"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K4WVH5P91F")</script></head><body class=theme-base-08><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://www.salmanq.com/><h1>Salman Quazi</h1></a><p class=lead>Director of Engineering for Microsoft Azure OpenAI in Mountain View, CA.</p></div><nav><ul class=sidebar-nav><li><a href=https://www.salmanq.com/>Home</a></li><li><a href=/blog/>Blog</a></li><li><a href=https://github.com/splusq/>Github</a></li><li><a href=https://www.linkedin.com/in/salmanquazi/>LinkedIn</a></li><li><a href=https://www.twitter.com/splusq>Twitter</a></li></ul></nav><p>Opinions are my own.</p></div></aside><main class="content container"><div class=post><h1>Volume Backup</h1><time datetime=2004-04-09T16:23:20Z class=post-date>Fri, Apr 9, 2004</time><p>I am trying to work on a system/method to perform incremental backup over the network (using SAMBA). Here are some of the steps I have taken&mldr;</p><p>First I decided on the set of data that needs to be backed up. Since the very beginning all my data files (such as documents, programs, musics and so on) are kept in a completely separate drive. This drive (although large in size) is used only for my personal stuff and I never install anything or create any dependencies on this drive. This helps me be independent in case of an operating system crash.</p><p>Secondly my web, mail-server and certain other configuration files are kept on a completely different computer (onupol). One of the things that needed to be done was move some of the MySQL databases to a regular file. In case of a system crash I could easily restore the database. I have done this using the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mysqldump -A -u root -p &gt; DbDump
</span></span></code></pre></div><p>This dumps all the MySQL databases into the file DbDump. The restore can then be done just by executing DbDump.</p><p>To automate this process I have written a bash-script that contains the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> <span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>mysqldump -A -u root --password<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yourpasswordhere&#34;</span> &gt; DbDump 
</span></span></code></pre></div><p>I saved this file as: savedb. I then needed to give execute permission to the file &ndash; this is done using:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> chmod u+x savedb 
</span></span></code></pre></div><p>One final thing. I decided that this needs to be done every-week. So I wrote this cron job (as root) to do just that. First here&rsquo;s how you start the cron-file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> crontab -e 
</span></span></code></pre></div><p>Then, write this job</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span> * * <span style=color:#ae81ff>7</span>     /root/savedb 
</span></span></code></pre></div><p>Save the file. This job executes every sunday (7) at 1:00AM.</p><p>This takes care of most of the stuff. Then I used Microsoft Windows 2000 Server Backup to backup my windows/linux stuff into one single backup file.</p><p>There are certain tricks to that first I had to mount (or share) the Linux computer over SMB (using samba).</p><p><strong>Note</strong> if you don&rsquo;t run your Windows 2000 server/Linux server as a PDC it is absolutely essential that your windows username and password match your samba username and password otherwise you will have to manually login everytime!</p><p>Then go to My Computer Right click any drive tools -> Backup. This wizard will guide you through the process of backing up the necessary folders and drives. My first option was to do a normal backup, then from that point on I will be doing incremental backup every month.</p><p>If you need extra details on any of the above steps let me know!</p></div><h2>Comments</h2><script src=https://utteranc.es/client.js repo=splusq/splusq.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></main></body></html>