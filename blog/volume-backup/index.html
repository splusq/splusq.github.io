<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Volume Backup | Salman Quazi</title><meta name=keywords content="Uncategorized"><meta name=description content="I am trying to work on a system/method to perform incremental backup over the network (using SAMBA). Here are some of the steps I have taken&mldr;
First I decided on the set of data that needs to be backed up. Since the very beginning all my data files (such as documents, programs, musics and so on) are kept in a completely separate drive. This drive (although large in size) is used only for my personal stuff and I never install anything or create any dependencies on this drive."><meta name=author content="Me"><link rel=canonical href=https://www.salmanq.com/blog/volume-backup/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.salmanq.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.salmanq.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.salmanq.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.salmanq.com/apple-touch-icon.png><link rel=mask-icon href=https://www.salmanq.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-38742121-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Volume Backup"><meta property="og:description" content="I am trying to work on a system/method to perform incremental backup over the network (using SAMBA). Here are some of the steps I have taken&mldr;
First I decided on the set of data that needs to be backed up. Since the very beginning all my data files (such as documents, programs, musics and so on) are kept in a completely separate drive. This drive (although large in size) is used only for my personal stuff and I never install anything or create any dependencies on this drive."><meta property="og:type" content="article"><meta property="og:url" content="https://www.salmanq.com/blog/volume-backup/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2004-04-09T16:23:20+00:00"><meta property="article:modified_time" content="2004-04-09T16:23:20+00:00"><meta property="og:site_name" content="Salman Quazi"><meta name=twitter:card content="summary"><meta name=twitter:title content="Volume Backup"><meta name=twitter:description content="I am trying to work on a system/method to perform incremental backup over the network (using SAMBA). Here are some of the steps I have taken&mldr;
First I decided on the set of data that needs to be backed up. Since the very beginning all my data files (such as documents, programs, musics and so on) are kept in a completely separate drive. This drive (although large in size) is used only for my personal stuff and I never install anything or create any dependencies on this drive."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://www.salmanq.com/blog/"},{"@type":"ListItem","position":2,"name":"Volume Backup","item":"https://www.salmanq.com/blog/volume-backup/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Volume Backup","name":"Volume Backup","description":"I am trying to work on a system/method to perform incremental backup over the network (using SAMBA). Here are some of the steps I have taken\u0026hellip;\nFirst I decided on the set of data that needs to be backed up. Since the very beginning all my data files (such as documents, programs, musics and so on) are kept in a completely separate drive. This drive (although large in size) is used only for my personal stuff and I never install anything or create any dependencies on this drive.","keywords":["Uncategorized"],"articleBody":"I am trying to work on a system/method to perform incremental backup over the network (using SAMBA). Here are some of the steps I have taken…\nFirst I decided on the set of data that needs to be backed up. Since the very beginning all my data files (such as documents, programs, musics and so on) are kept in a completely separate drive. This drive (although large in size) is used only for my personal stuff and I never install anything or create any dependencies on this drive. This helps me be independent in case of an operating system crash.\nSecondly my web, mail-server and certain other configuration files are kept on a completely different computer (onupol). One of the things that needed to be done was move some of the MySQL databases to a regular file. In case of a system crash I could easily restore the database. I have done this using the following code:\nmysqldump -A -u root -p \u003e DbDump This dumps all the MySQL databases into the file DbDump. The restore can then be done just by executing DbDump.\nTo automate this process I have written a bash-script that contains the following:\n#!/bin/bash mysqldump -A -u root --password=\"yourpasswordhere\" \u003e DbDump I saved this file as: savedb. I then needed to give execute permission to the file – this is done using:\nchmod u+x savedb One final thing. I decided that this needs to be done every-week. So I wrote this cron job (as root) to do just that. First here’s how you start the cron-file:\ncrontab -e Then, write this job\n0 1 * * 7 /root/savedb Save the file. This job executes every sunday (7) at 1:00AM.\nThis takes care of most of the stuff. Then I used Microsoft Windows 2000 Server Backup to backup my windows/linux stuff into one single backup file.\nThere are certain tricks to that first I had to mount (or share) the Linux computer over SMB (using samba).\nNote if you don’t run your Windows 2000 server/Linux server as a PDC it is absolutely essential that your windows username and password match your samba username and password otherwise you will have to manually login everytime!\nThen go to My Computer Right click any drive tools -\u003e Backup. This wizard will guide you through the process of backing up the necessary folders and drives. My first option was to do a normal backup, then from that point on I will be doing incremental backup every month.\nIf you need extra details on any of the above steps let me know!\n","wordCount":"430","inLanguage":"en","datePublished":"2004-04-09T16:23:20Z","dateModified":"2004-04-09T16:23:20Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.salmanq.com/blog/volume-backup/"},"publisher":{"@type":"Organization","name":"Salman Quazi","logo":{"@type":"ImageObject","url":"https://www.salmanq.com/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.salmanq.com/ accesskey=h title="Salman Quazi (Alt + H)">Salman Quazi</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.salmanq.com/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://github.com/splusq/ title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.linkedin.com/in/salmanquazi/ title=LinkedIn><span>LinkedIn</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.twitter.com/splusq title=Twitter><span>Twitter</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.salmanq.com/>Home</a>&nbsp;»&nbsp;<a href=https://www.salmanq.com/blog/>Blogs</a></div><h1 class=post-title>Volume Backup</h1><div class=post-meta><span title='2004-04-09 16:23:20 +0000 UTC'>April 9, 2004</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me</div></header><div class=post-content><p>I am trying to work on a system/method to perform incremental backup over the network (using SAMBA). Here are some of the steps I have taken&mldr;</p><p>First I decided on the set of data that needs to be backed up. Since the very beginning all my data files (such as documents, programs, musics and so on) are kept in a completely separate drive. This drive (although large in size) is used only for my personal stuff and I never install anything or create any dependencies on this drive. This helps me be independent in case of an operating system crash.</p><p>Secondly my web, mail-server and certain other configuration files are kept on a completely different computer (onupol). One of the things that needed to be done was move some of the MySQL databases to a regular file. In case of a system crash I could easily restore the database. I have done this using the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mysqldump -A -u root -p &gt; DbDump
</span></span></code></pre></div><p>This dumps all the MySQL databases into the file DbDump. The restore can then be done just by executing DbDump.</p><p>To automate this process I have written a bash-script that contains the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> <span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>mysqldump -A -u root --password<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yourpasswordhere&#34;</span> &gt; DbDump 
</span></span></code></pre></div><p>I saved this file as: savedb. I then needed to give execute permission to the file &ndash; this is done using:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> chmod u+x savedb 
</span></span></code></pre></div><p>One final thing. I decided that this needs to be done every-week. So I wrote this cron job (as root) to do just that. First here&rsquo;s how you start the cron-file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> crontab -e 
</span></span></code></pre></div><p>Then, write this job</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span> * * <span style=color:#ae81ff>7</span>     /root/savedb 
</span></span></code></pre></div><p>Save the file. This job executes every sunday (7) at 1:00AM.</p><p>This takes care of most of the stuff. Then I used Microsoft Windows 2000 Server Backup to backup my windows/linux stuff into one single backup file.</p><p>There are certain tricks to that first I had to mount (or share) the Linux computer over SMB (using samba).</p><p><strong>Note</strong> if you don&rsquo;t run your Windows 2000 server/Linux server as a PDC it is absolutely essential that your windows username and password match your samba username and password otherwise you will have to manually login everytime!</p><p>Then go to My Computer Right click any drive tools -> Backup. This wizard will guide you through the process of backing up the necessary folders and drives. My first option was to do a normal backup, then from that point on I will be doing incremental backup every month.</p><p>If you need extra details on any of the above steps let me know!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.salmanq.com/tags/uncategorized/>Uncategorized</a></li></ul><nav class=paginav><a class=prev href=https://www.salmanq.com/blog/hiding-elements-during-printing/><span class=title>« Prev</span><br><span>Hiding Elements During Printing</span></a>
<a class=next href=https://www.salmanq.com/blog/random-numbers/><span class=title>Next »</span><br><span>Random Numbers</span></a></nav></footer><script src=https://utteranc.es/client.js repo=splusq/splusq.github.io issue-term=title theme=github-dark crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://www.salmanq.com/>Salman Quazi</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>